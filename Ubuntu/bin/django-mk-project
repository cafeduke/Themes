#!/bin/bash -e

# -------------------------------------------------------------------------------------------------
# Functions
# -------------------------------------------------------------------------------------------------
BASEDIR=$(dirname $(readlink -f ${0}))
BASENAME=$(basename ${0})

function usage {
  echo "Usage: ${BASENAME} <django project name>"
  echo "Convention: A project is recommended to be a single word in lower case. Words can be separated by '_'"
  exit 0
}

function dieUsage {
  local mesg=${1}
  echo "Error: ${mesg}"
  usage
  exit 1
}

# -------------------------------------------------------------------------------------------------
# Parse Arg
# -------------------------------------------------------------------------------------------------
if [[ ${#} -eq 1 && ("${1}" == "-h" || "${1}" == "--help") ]]
then
  usage
fi

if [[ ${#} -ne 1 ]]
then
  dieUsage "Provide a single argument of project-name"
fi

name=${1}

# -------------------------------------------------------------------------------------------------
# Main
# -------------------------------------------------------------------------------------------------
which django-admin || dieUsage "Error: django-admin not in PATH"
django-admin startproject setup
mv setup ${name}
echo "Created project ${PWD}/${name}."
